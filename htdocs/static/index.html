<html>
<head>
    <script type='text/javascript' src='/js/jquery.min.js'></script>
     <link rel="stylesheet" type="text/css" href="/css/table.css">
     <link rel="stylesheet" type="text/css" href="/css/div.css">
     <META HTTP-EQUIV="Refresh" CONTENT="5" URL="/index.html">
</head>
<body>
	</p>
	<div class="box">
		<div class="div1">
		<table class="mGrid" id="jsondata" border="1">
		<thead>
			<th>Task</th>
			<th>Node</th>
			<th>Status</th>
			<th>Command/Module</th>
			<th>Arguments</th>
                        <th>Start Time</th>
                        <th>End time</th>
		</thead>
		<tbody></tbody>
	</table>
		</div>
		<div class="div2">
			<img src="example.png"/>	
		</div>
		<div class="clear"> </div>
	</div>

<script type="text/javascript">

	$(document).ready(function(){
		var url="/tasks";
		$("#jsondata tbody").html("");
		$.getJSON(url,function(data){
			$.each(data.Tasks, function(key,val){
				color = "white"
				rstatus = "Queud"
				if (val.Status >= 0) {
						rstatus = "Done"
						color = "green"
				}
				if (val.Status == -1) {
						rstatus = "Running"
						color = "orange"
				}
				var newRow =
				"<tr bgcolor="+color+">"
				+"<td>"+val.Name+"</td>"
				+"<td>"+val.Node+"</td>"
				+"<td>"+rstatus+"</td>"
				+"<td>"+val.Module+"</td>"
				+"<td>"+val.Args+"</td>"
				+"<td>"+val.StartTime+"</td>"
				+"<td>"+val.EndTime+"</td>"
				+"</tr>" ;
				$(newRow).appendTo("#jsondata tbody");
			});
		});
	});

</script>
<p style="text-align: justify;">
</body>
</html>
